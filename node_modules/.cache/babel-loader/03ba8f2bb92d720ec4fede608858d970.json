{"ast":null,"code":"import _objectSpread from \"D:\\\\Expenses_Tracker\\\\300seconds-master\\\\300seconds-master\\\\coreui_react_starter\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";\nimport _toConsumableArray from \"D:\\\\Expenses_Tracker\\\\300seconds-master\\\\300seconds-master\\\\coreui_react_starter\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/toConsumableArray\";\nimport _slicedToArray from \"D:\\\\Expenses_Tracker\\\\300seconds-master\\\\300seconds-master\\\\coreui_react_starter\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";\nimport { useEffect, useState } from \"react\";\nexport var Actions = function Actions() {\n  var _useState = useState([]),\n      _useState2 = _slicedToArray(_useState, 2),\n      users = _useState2[0],\n      setUsers = _useState2[1]; //userLength is for showing the Data Loading message.\n\n\n  var _useState3 = useState(null),\n      _useState4 = _slicedToArray(_useState3, 2),\n      userLength = _useState4[0],\n      setUserLength = _useState4[1];\n\n  useEffect(function () {\n    fetch(\"http://localhost/php-auth-api/all-income.php\").then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        setUsers(data.users.reverse());\n        setUserLength(true);\n      } else {\n        setUserLength(0);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }, []); // Inserting a new user into the database.\n\n  var insertUser = function insertUser(newUser) {\n    fetch(\"http://localhost/php-auth-api/add-income.php\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(newUser)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.id) {\n        setUsers([_objectSpread({\n          id: data.id\n        }, newUser)].concat(_toConsumableArray(users)));\n        setUserLength(true);\n      } else {\n        alert(data.msg);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }; // Enabling the edit mode for a listed user.\n\n\n  var editMode = function editMode(id) {\n    users = users.map(function (user) {\n      if (user.id === id) {\n        user.isEditing = true;\n        return user;\n      }\n\n      user.isEditing = false;\n      return user;\n    });\n    setUsers(users);\n  }; // Cance the edit mode.\n\n\n  var cancelEdit = function cancelEdit(id) {\n    users = users.map(function (user) {\n      if (user.id === id) {\n        user.isEditing = false;\n        return user;\n      }\n\n      return user;\n    });\n    setUsers(users);\n  }; // Updating a user.\n\n\n  var updateUser = function updateUser(userData) {\n    fetch(\"http://localhost/php-auth-api/update-income.php\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify(userData)\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        users = users.map(function (user) {\n          if (user.id === userData.id) {\n            user.isEditing = false;\n            user.user_name = userData.user_name;\n            user.user_email = userData.user_email;\n            user;\n            return user;\n          }\n\n          return user;\n        });\n        setUsers(users);\n      } else {\n        alert(data.msg);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  }; // Deleting a user.\n\n\n  var deleteUser = function deleteUser(theID) {\n    // filter outing the user.\n    var userDeleted = users.filter(function (user) {\n      return user.id !== theID;\n    });\n    fetch(\"http://localhost/php-auth-api/delete-income.php\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\"\n      },\n      body: JSON.stringify({\n        id: theID\n      })\n    }).then(function (res) {\n      return res.json();\n    }).then(function (data) {\n      if (data.success) {\n        setUsers(userDeleted);\n\n        if (users.length === 1) {\n          setUserLength(0);\n        }\n      } else {\n        alert(data.msg);\n      }\n    }).catch(function (err) {\n      console.log(err);\n    });\n  };\n\n  return {\n    users: users,\n    editMode: editMode,\n    cancelEdit: cancelEdit,\n    updateUser: updateUser,\n    insertUser: insertUser,\n    deleteUser: deleteUser,\n    userLength: userLength\n  };\n};","map":{"version":3,"sources":["D:/Expenses_Tracker/300seconds-master/300seconds-master/coreui_react_starter/src/views/page/income/Action.js"],"names":["useEffect","useState","Actions","users","setUsers","userLength","setUserLength","fetch","then","res","json","data","success","reverse","catch","err","console","log","insertUser","newUser","method","headers","body","JSON","stringify","id","alert","msg","editMode","map","user","isEditing","cancelEdit","updateUser","userData","user_name","user_email","deleteUser","theID","userDeleted","filter","length"],"mappings":"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","sourcesContent":["import { useEffect, useState } from \"react\";\r\n\r\nexport const Actions = () => {\r\n  let [users, setUsers] = useState([]);\r\n\r\n    //userLength is for showing the Data Loading message.\r\n  let [userLength, setUserLength] = useState(null);\r\n\r\n  useEffect(() => {\r\n    fetch(\"http://localhost/php-auth-api/all-income.php\")\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setUsers(data.users.reverse());\r\n          setUserLength(true);\r\n        } else {\r\n          setUserLength(0);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  }, []);\r\n\r\n  // Inserting a new user into the database.\r\n  const insertUser = (newUser) => {\r\n    fetch(\"http://localhost/php-auth-api/add-income.php\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(newUser),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.id) {\r\n          setUsers([\r\n            {\r\n              id: data.id,\r\n              ...newUser,\r\n            },\r\n            ...users,\r\n          ]);\r\n          setUserLength(true);\r\n        } else {\r\n          alert(data.msg);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // Enabling the edit mode for a listed user.\r\n  const editMode = (id) => {\r\n    users = users.map((user) => {\r\n      if (user.id === id) {\r\n        user.isEditing = true;\r\n        return user;\r\n      }\r\n      user.isEditing = false;\r\n      return user;\r\n    });\r\n    setUsers(users);\r\n  };\r\n\r\n  // Cance the edit mode.\r\n  const cancelEdit = (id) => {\r\n    users = users.map((user) => {\r\n      if (user.id === id) {\r\n        user.isEditing = false;\r\n        return user;\r\n      }\r\n      return user;\r\n    });\r\n    setUsers(users);\r\n  };\r\n\r\n  // Updating a user.\r\n  const updateUser = (userData) => {\r\n    fetch(\"http://localhost/php-auth-api/update-income.php\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify(userData),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          users = users.map((user) => {\r\n            if (user.id === userData.id) {\r\n              user.isEditing = false;\r\n              user.user_name = userData.user_name;\r\n              user.user_email = userData.user_email;\r\n              user\r\n              return user;\r\n            }\r\n            return user;\r\n          });\r\n          setUsers(users);\r\n        } else {\r\n          alert(data.msg);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  // Deleting a user.\r\n  const deleteUser = (theID) => {\r\n      // filter outing the user.\r\n    let userDeleted = users.filter((user) => {\r\n      return user.id !== theID;\r\n    });\r\n    fetch(\"http://localhost/php-auth-api/delete-income.php\", {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-Type\": \"application/json\",\r\n      },\r\n      body: JSON.stringify({ id: theID }),\r\n    })\r\n      .then((res) => {\r\n        return res.json();\r\n      })\r\n      .then((data) => {\r\n        if (data.success) {\r\n          setUsers(userDeleted);\r\n          if (users.length === 1) {\r\n            setUserLength(0);\r\n          }\r\n        } else {\r\n          alert(data.msg);\r\n        }\r\n      })\r\n      .catch((err) => {\r\n        console.log(err);\r\n      });\r\n  };\r\n\r\n  return {\r\n    users,\r\n    editMode,\r\n    cancelEdit,\r\n    updateUser,\r\n    insertUser,\r\n    deleteUser,\r\n    userLength,\r\n  };\r\n};"]},"metadata":{},"sourceType":"module"}